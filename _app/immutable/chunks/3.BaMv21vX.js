import{D as It,E as Nn,s as we,b as T,n as ue,F as mt,d as xs,u as Ns,g as $s,e as Ms,o as dt,j as $n,v as Mn,c as Fn,r as gt}from"./scheduler.K1kdHZI_.js";import{S as be,i as ke,d as S,v as Te,e as O,b as j,f as R,a as y,k as g,A as B,l as M,x as me,B as ge,u as U,y as _e,r as L,z as ze,o as H,s as G,p as Y,c as K,q as V,m as w,w as W,t as Oe,j as je,n as ft,E as ds,F as Ze,C as fs,G as ps,H as re,I as zn,J as qn,h as Hn,g as Me,K as qe,L as Dt,M as fe,N as pe}from"./index.DN-XcvGa.js";import{_ as He}from"./preload-helper.db2Qn6PZ.js";import{d as Vn,w as Fs}from"./index.C9blCO-d.js";function _t(n,e){const t={},s={},r={$$scope:1};let i=n.length;for(;i--;){const o=n[i],a=e[i];if(a){for(const c in o)c in a||(s[c]=1);for(const c in a)r[c]||(t[c]=a[c],r[c]=1);n[i]=a}else for(const c in o)r[c]=1}for(const o in s)o in t||(t[o]=void 0);return t}function Qt(n){return typeof n=="object"&&n!==null?n:{}}const Wn=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>He(async()=>{const{default:s}=await Promise.resolve().then(()=>We);return{default:s}},void 0,import.meta.url).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class Yt extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class Jn extends Yt{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Gn extends Yt{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Kn extends Yt{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Lt;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Lt||(Lt={}));var Xn=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{u(s.next(l))}catch(h){o(h)}}function c(l){try{u(s.throw(l))}catch(h){o(h)}}function u(l){l.done?i(l.value):r(l.value).then(a,c)}u((s=s.apply(n,e||[])).next())})};class Qn{constructor(e,{headers:t={},customFetch:s,region:r=Lt.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=Wn(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return Xn(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:o}=t;let a={},{region:c}=t;c||(c=this.region),c&&c!=="any"&&(a["x-region"]=c);let u;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const l=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),r),body:u}).catch(p=>{throw new Jn(p)}),h=l.headers.get("x-relay-error");if(h&&h==="true")throw new Gn(l);if(!l.ok)throw new Kn(l);let d=((s=l.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),f;return d==="application/json"?f=yield l.json():d==="application/octet-stream"?f=yield l.blob():d==="text/event-stream"?f=l:d==="multipart/form-data"?f=yield l.formData():f=yield l.text(),{data:f,error:null}}catch(r){return{data:null,error:r}}})}}var ie=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ro(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Yn(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var r=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:function(){return n[s]}})}),t}var ne={},Zt={},vt={},nt={},yt={},wt={},Zn=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ve=Zn();const er=Ve.fetch,zs=Ve.fetch.bind(Ve),qs=Ve.Headers,tr=Ve.Request,sr=Ve.Response,We=Object.freeze(Object.defineProperty({__proto__:null,Headers:qs,Request:tr,Response:sr,default:zs,fetch:er},Symbol.toStringTag,{value:"Module"})),nr=Yn(We);var es={};Object.defineProperty(es,"__esModule",{value:!0});class rr extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}es.default=rr;var Hs=ie&&ie.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(wt,"__esModule",{value:!0});const ir=Hs(nr),or=Hs(es);let ar=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=ir.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let r=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,c;let u=null,l=null,h=null,d=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){const m=await i.text();m===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?l=m:l=JSON.parse(m))}const _=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),v=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");_&&v&&v.length>1&&(h=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(l)&&(l.length>1?(u={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,h=null,d=406,f="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{const _=await i.text();try{u=JSON.parse(_),Array.isArray(u)&&i.status===404&&(l=[],u=null,d=200,f="OK")}catch{i.status===404&&_===""?(d=204,f="No Content"):u={message:_}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,d=200,f="OK"),u&&this.shouldThrowOnError)throw new or.default(u)}return{error:u,data:l,count:h,status:d,statusText:f}});return this.shouldThrowOnError||(r=r.catch(i=>{var o,a,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}};wt.default=ar;var cr=ie&&ie.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(yt,"__esModule",{value:!0});const lr=cr(wt);let ur=class extends lr.default{select(e){let t=!1;const s=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const r=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:r=s}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var a;const c=[e?"analyze":null,t?"verbose":null,s?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};yt.default=ur;var hr=ie&&ie.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(nt,"__esModule",{value:!0});const dr=hr(yt);let fr=class extends dr.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}};nt.default=fr;var pr=ie&&ie.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(vt,"__esModule",{value:!0});const Xe=pr(nt);let mr=class{constructor(e,{headers:t={},schema:s,fetch:r}){this.url=e,this.headers=t,this.schema=s,this.fetch=r}select(e,{head:t=!1,count:s}={}){const r=t?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),s&&(this.headers.Prefer=`count=${s}`),new Xe.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const r="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),s||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(o.length>0){const a=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new Xe.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:r,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${s?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const c=e.reduce((u,l)=>u.concat(Object.keys(l)),[]);if(c.length>0){const u=[...new Set(c)].map(l=>`"${l}"`);this.url.searchParams.set("columns",u.join(","))}}return new Xe.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),this.headers.Prefer=r.join(","),new Xe.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new Xe.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};vt.default=mr;var bt={},kt={};Object.defineProperty(kt,"__esModule",{value:!0});kt.version=void 0;kt.version="0.0.0-automated";Object.defineProperty(bt,"__esModule",{value:!0});bt.DEFAULT_HEADERS=void 0;const gr=kt;bt.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${gr.version}`};var Vs=ie&&ie.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Zt,"__esModule",{value:!0});const _r=Vs(vt),vr=Vs(nt),yr=bt;let wr=class Ws{constructor(e,{headers:t={},schema:s,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},yr.DEFAULT_HEADERS),t),this.schemaName=s,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new _r.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Ws(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:r=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let c;s||r?(o=s?"HEAD":"GET",Object.entries(t).filter(([l,h])=>h!==void 0).map(([l,h])=>[l,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([l,h])=>{a.searchParams.append(l,h)})):(o="POST",c=t);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new vr.default({method:o,url:a,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Zt.default=wr;var rt=ie&&ie.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ne,"__esModule",{value:!0});ne.PostgrestBuilder=ne.PostgrestTransformBuilder=ne.PostgrestFilterBuilder=ne.PostgrestQueryBuilder=ne.PostgrestClient=void 0;const Js=rt(Zt);ne.PostgrestClient=Js.default;const Gs=rt(vt);ne.PostgrestQueryBuilder=Gs.default;const Ks=rt(nt);ne.PostgrestFilterBuilder=Ks.default;const Xs=rt(yt);ne.PostgrestTransformBuilder=Xs.default;const Qs=rt(wt);ne.PostgrestBuilder=Qs.default;var br=ne.default={PostgrestClient:Js.default,PostgrestQueryBuilder:Gs.default,PostgrestFilterBuilder:Ks.default,PostgrestTransformBuilder:Xs.default,PostgrestBuilder:Qs.default};const{PostgrestClient:kr,PostgrestQueryBuilder:Bo,PostgrestFilterBuilder:xo,PostgrestTransformBuilder:No,PostgrestBuilder:$o}=br,Tr="2.10.2",Er={"X-Client-Info":`realtime-js/${Tr}`},Sr="1.0.0",Ys=1e4,Pr=1e3;var Fe;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Fe||(Fe={}));var ee;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(ee||(ee={}));var le;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(le||(le={}));var Ut;(function(n){n.websocket="websocket"})(Ut||(Ut={}));var De;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(De||(De={}));class Or{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const r=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=s.decode(e.slice(o,o+r));o=o+r;const c=s.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(s.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:u}}}class Zs{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var N;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(N||(N={}));const ms=(n,e,t={})=>{var s;const r=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((i,o)=>(i[o]=jr(o,n,e,r),i),{})},jr=(n,e,t,s)=>{const r=e.find(a=>a.name===n),i=r==null?void 0:r.type,o=t[n];return i&&!s.includes(i)?en(i,o):Bt(o)},en=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return Ir(e,t)}switch(n){case N.bool:return Cr(e);case N.float4:case N.float8:case N.int2:case N.int4:case N.int8:case N.numeric:case N.oid:return Ar(e);case N.json:case N.jsonb:return Rr(e);case N.timestamp:return Dr(e);case N.abstime:case N.date:case N.daterange:case N.int4range:case N.int8range:case N.money:case N.reltime:case N.text:case N.time:case N.timestamptz:case N.timetz:case N.tsrange:case N.tstzrange:return Bt(e);default:return Bt(e)}},Bt=n=>n,Cr=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Ar=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},Rr=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},Ir=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,s=n[t];if(n[0]==="{"&&s==="}"){let i;const o=n.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>en(e,a))}return n},Dr=n=>typeof n=="string"?n.replace(" ","T"):n,tn=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Pt{constructor(e,t,s={},r=Ys){this.channel=e,this.event=t,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var gs;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(gs||(gs={}));class et{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=et.syncState(this.state,r,i,o),this.pendingDiffs.forEach(c=>{this.state=et.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(s.diff,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=et.syncDiff(this.state,r,i,o),a())}),this.onJoin((r,i,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:o})}),this.onLeave((r,i,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,r){const i=this.cloneDeep(e),o=this.transformState(t),a={},c={};return this.map(i,(u,l)=>{o[u]||(c[u]=l)}),this.map(o,(u,l)=>{const h=i[u];if(h){const d=l.map(v=>v.presence_ref),f=h.map(v=>v.presence_ref),p=l.filter(v=>f.indexOf(v.presence_ref)<0),_=h.filter(v=>d.indexOf(v.presence_ref)<0);p.length>0&&(a[u]=p),_.length>0&&(c[u]=_)}else a[u]=l}),this.syncDiff(i,{joins:a,leaves:c},s,r)}static syncDiff(e,t,s,r){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(i,(a,c)=>{var u;const l=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(c),l.length>0){const h=e[a].map(f=>f.presence_ref),d=l.filter(f=>h.indexOf(f.presence_ref)<0);e[a].unshift(...d)}s(a,l,c)}),this.map(o,(a,c)=>{let u=e[a];if(!u)return;const l=c.map(h=>h.presence_ref);u=u.filter(h=>l.indexOf(h.presence_ref)<0),e[a]=u,r(a,u,c),u.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const r=e[s];return"metas"in r?t[s]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[s]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var _s;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(_s||(_s={}));var vs;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes"})(vs||(vs={}));var ys;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(ys||(ys={}));class ts{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=ee.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Pt(this,le.join,this.params,this.timeout),this.rejoinTimer=new Zs(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ee.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ee.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=ee.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ee.errored,this.rejoinTimer.scheduleTimeout())}),this._on(le.reply,{},(r,i)=>{this._trigger(this._replyEventName(i),r)}),this.presence=new et(this),this.broadcastEndpointURL=tn(this.socket.endPoint)+"/api/broadcast"}subscribe(e,t=this.timeout){var s,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(l=>e&&e("CHANNEL_ERROR",l)),this._onClose(()=>e&&e("CLOSED"));const c={},u={broadcast:i,presence:o,postgres_changes:(r=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(l=>l.filter))!==null&&r!==void 0?r:[],private:a};this.socket.accessToken&&(c.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:l})=>{var h;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),l===void 0){e&&e("SUBSCRIBED");return}else{const d=this.bindings.postgres_changes,f=(h=d==null?void 0:d.length)!==null&&h!==void 0?h:0,p=[];for(let _=0;_<f;_++){const v=d[_],{filter:{event:m,schema:b,table:k,filter:C}}=v,x=l&&l[_];if(x&&x.event===m&&x.schema===b&&x.table===k&&x.filter===C)p.push(Object.assign(Object.assign({},v),{id:x.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e("SUBSCRIBED");return}}).receive("error",l=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(l).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,r;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,a={method:"POST",headers:{Authorization:this.socket.accessToken?`Bearer ${this.socket.accessToken}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((r=c.body)===null||r===void 0?void 0:r.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,c;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ee.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(le.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(s=>{const r=new Pt(this,le.leave,{},e);r.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}async _fetchWithTimeout(e,t,s){const r=new AbortController,i=setTimeout(()=>r.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),o}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Pt(this,e,t,s);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var r,i;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:u,join:l}=le;if(s&&[a,c,u,l].indexOf(o)>=0&&s!==this._joinRef())return;let d=this._onMessage(o,t,s);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(f=>{var p,_,v;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((v=(_=f.filter)===null||_===void 0?void 0:_.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(f=>f.callback(d,s)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var p,_,v,m,b,k;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const C=f.id,x=(p=f.filter)===null||p===void 0?void 0:p.event;return C&&((_=t.ids)===null||_===void 0?void 0:_.includes(C))&&(x==="*"||(x==null?void 0:x.toLocaleLowerCase())===((v=t.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const C=(b=(m=f==null?void 0:f.filter)===null||m===void 0?void 0:m.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return C==="*"||C===((k=t==null?void 0:t.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof d=="object"&&"ids"in d){const p=d.data,{schema:_,table:v,commit_timestamp:m,type:b,errors:k}=p;d=Object.assign(Object.assign({},{schema:_,table:v,commit_timestamp:m,eventType:b,new:{},old:{},errors:k}),this._getPayloadRecords(p))}f.callback(d,s)})}_isClosed(){return this.state===ee.closed}_isJoined(){return this.state===ee.joined}_isJoining(){return this.state===ee.joining}_isLeaving(){return this.state===ee.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:s};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&ts.isEqual(r.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(le.close,{},e)}_onError(e){this._on(le.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ee.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=ms(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=ms(e.columns,e.old_record)),t}}const Lr=()=>{},Ur=typeof WebSocket<"u";class Br{constructor(e,t){var s;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Er,this.params={},this.timeout=Ys,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Lr,this.conn=null,this.sendBuffer=[],this.serializer=new Or,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>He(async()=>{const{default:c}=await Promise.resolve().then(()=>We);return{default:c}},void 0,import.meta.url).then(({default:c})=>c(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${Ut.websocket}`,this.httpEndpoint=tn(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const r=(s=t==null?void 0:t.params)===null||s===void 0?void 0:s.apikey;r&&(this.accessToken=r,this.apiKey=r),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Zs(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(Ur){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new xr(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),He(async()=>{const{default:e}=await import("./browser.dkvMpz_G.js").then(t=>t.b);return{default:e}},[],import.meta.url).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Fe.connecting:return De.Connecting;case Fe.open:return De.Open;case Fe.closing:return De.Closing;default:return De.Closed}}isConnected(){return this.connectionState()===De.Open}channel(e,t={config:{}}){const s=new ts(`realtime:${e}`,t,this);return this.channels.push(s),s}push(e){const{topic:t,event:s,payload:r,ref:i}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${t} ${s} (${i})`,r),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(le.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Sr}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:r,payload:i,ref:o}=t;(o&&o===this.pendingHeartbeatRef||r===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${s} ${r} ${o&&"("+o+")"||""}`,i),this.channels.filter(a=>a._isMember(s)).forEach(a=>a._trigger(r,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(le.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${s}${r}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Pr,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class xr{constructor(e,t,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Fe.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=s.close}}class ss extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function J(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class Nr extends ss{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ws extends ss{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var $r=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{u(s.next(l))}catch(h){o(h)}}function c(l){try{u(s.throw(l))}catch(h){o(h)}}function u(l){l.done?i(l.value):r(l.value).then(a,c)}u((s=s.apply(n,e||[])).next())})};const sn=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>He(async()=>{const{default:s}=await Promise.resolve().then(()=>We);return{default:s}},void 0,import.meta.url).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Mr=()=>$r(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield He(()=>Promise.resolve().then(()=>We),void 0,import.meta.url)).Response:Response});var Je=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{u(s.next(l))}catch(h){o(h)}}function c(l){try{u(s.throw(l))}catch(h){o(h)}}function u(l){l.done?i(l.value):r(l.value).then(a,c)}u((s=s.apply(n,e||[])).next())})};const Ot=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Fr=(n,e)=>Je(void 0,void 0,void 0,function*(){const t=yield Mr();n instanceof t?n.json().then(s=>{e(new Nr(Ot(s),n.status||500))}).catch(s=>{e(new ws(Ot(s),s))}):e(new ws(Ot(n),n))}),zr=(n,e,t,s)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),t))};function Tt(n,e,t,s,r,i){return Je(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,zr(e,s,r,i)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Fr(c,a))})})}function xt(n,e,t,s){return Je(this,void 0,void 0,function*(){return Tt(n,"GET",e,t,s)})}function Se(n,e,t,s,r){return Je(this,void 0,void 0,function*(){return Tt(n,"POST",e,s,r,t)})}function qr(n,e,t,s,r){return Je(this,void 0,void 0,function*(){return Tt(n,"PUT",e,s,r,t)})}function nn(n,e,t,s,r){return Je(this,void 0,void 0,function*(){return Tt(n,"DELETE",e,s,r,t)})}var se=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{u(s.next(l))}catch(h){o(h)}}function c(l){try{u(s.throw(l))}catch(h){o(h)}}function u(l){l.done?i(l.value):r(l.value).then(a,c)}u((s=s.apply(n,e||[])).next())})};const Hr={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},bs={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Vr{constructor(e,t={},s,r){this.url=e,this.headers=t,this.bucketId=s,this.fetch=sn(r)}uploadOrUpdate(e,t,s,r){return se(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},bs),r),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",o.cacheControl)):(i=s,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType);const c=this._removeEmptyFolders(t),u=this._getFinalPath(c),l=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield l.json();return l.ok?{data:{path:c,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(J(i))return{data:null,error:i};throw i}})}upload(e,t,s){return se(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,r){return se(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let c;const u=Object.assign({upsert:bs.upsert},r),l=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",u.cacheControl)):(c=s,l["cache-control"]=`max-age=${u.cacheControl}`,l["content-type"]=u.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:c,headers:l}),d=yield h.json();return h.ok?{data:{path:i,fullPath:d.Key},error:null}:{data:null,error:d}}catch(c){if(J(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return se(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=Object.assign({},this.headers);t!=null&&t.upsert&&(r["x-upsert"]="true");const i=yield Se(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:r}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new ss("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(s){if(J(s))return{data:null,error:s};throw s}})}update(e,t,s){return se(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return se(this,void 0,void 0,function*(){try{return{data:yield Se(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(J(r))return{data:null,error:r};throw r}})}copy(e,t,s){return se(this,void 0,void 0,function*(){try{return{data:{path:(yield Se(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(J(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,s){return se(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield Se(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(r){if(J(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,s){return se(this,void 0,void 0,function*(){try{const r=yield Se(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(r){if(J(r))return{data:null,error:r};throw r}})}download(e,t){return se(this,void 0,void 0,function*(){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield xt(this.fetch,`${this.url}/${r}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(J(a))return{data:null,error:a};throw a}})}getPublicUrl(e,t){const s=this._getFinalPath(e),r=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&r.push(i);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&r.push(c);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${s}${u}`)}}}remove(e){return se(this,void 0,void 0,function*(){try{return{data:yield nn(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(J(t))return{data:null,error:t};throw t}})}list(e,t,s){return se(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Hr),t),{prefix:e||""});return{data:yield Se(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(J(r))return{data:null,error:r};throw r}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Wr="2.6.0",Jr={"X-Client-Info":`storage-js/${Wr}`};var xe=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{u(s.next(l))}catch(h){o(h)}}function c(l){try{u(s.throw(l))}catch(h){o(h)}}function u(l){l.done?i(l.value):r(l.value).then(a,c)}u((s=s.apply(n,e||[])).next())})};class Gr{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},Jr),t),this.fetch=sn(s)}listBuckets(){return xe(this,void 0,void 0,function*(){try{return{data:yield xt(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(J(e))return{data:null,error:e};throw e}})}getBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:yield xt(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(J(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return xe(this,void 0,void 0,function*(){try{return{data:yield Se(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(J(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return xe(this,void 0,void 0,function*(){try{return{data:yield qr(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(J(s))return{data:null,error:s};throw s}})}emptyBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:yield Se(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(J(t))return{data:null,error:t};throw t}})}deleteBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:yield nn(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(J(t))return{data:null,error:t};throw t}})}}class Kr extends Gr{constructor(e,t={},s){super(e,t,s)}from(e){return new Vr(this.url,this.headers,e,this.fetch)}}const Xr="2.45.1";let Ye="";typeof Deno<"u"?Ye="deno":typeof document<"u"?Ye="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ye="react-native":Ye="node";const Qr={"X-Client-Info":`supabase-js-${Ye}/${Xr}`},Yr={headers:Qr},Zr={schema:"public"},ei={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ti={};var si=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{u(s.next(l))}catch(h){o(h)}}function c(l){try{u(s.throw(l))}catch(h){o(h)}}function u(l){l.done?i(l.value):r(l.value).then(a,c)}u((s=s.apply(n,e||[])).next())})};const ni=n=>{let e;return n?e=n:typeof fetch>"u"?e=zs:e=fetch,(...t)=>e(...t)},ri=()=>typeof Headers>"u"?qs:Headers,ii=(n,e,t)=>{const s=ni(t),r=ri();return(i,o)=>si(void 0,void 0,void 0,function*(){var a;const c=(a=yield e())!==null&&a!==void 0?a:n;let u=new r(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",n),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),s(i,Object.assign(Object.assign({},o),{headers:u}))})};var oi=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{u(s.next(l))}catch(h){o(h)}}function c(l){try{u(s.throw(l))}catch(h){o(h)}}function u(l){l.done?i(l.value):r(l.value).then(a,c)}u((s=s.apply(n,e||[])).next())})};function ai(n){return n.replace(/\/$/,"")}function ci(n,e){const{db:t,auth:s,realtime:r,global:i}=n,{db:o,auth:a,realtime:c,global:u}=e,l={db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),s),realtime:Object.assign(Object.assign({},c),r),global:Object.assign(Object.assign({},u),i),accessToken:()=>oi(this,void 0,void 0,function*(){return""})};return n.accessToken?l.accessToken=n.accessToken:delete l.accessToken,l}const rn="2.64.4",li="http://localhost:9999",ui="supabase.auth.token",hi={"X-Client-Info":`gotrue-js/${rn}`},ks=10,Nt="X-Supabase-Api-Version",on={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function di(n){return Math.round(Date.now()/1e3)+n}function fi(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const ce=()=>typeof document<"u",Ae={tested:!1,writable:!1},tt=()=>{if(!ce())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ae.tested)return Ae.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Ae.tested=!0,Ae.writable=!0}catch{Ae.tested=!0,Ae.writable=!1}return Ae.writable};function jt(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((r,i)=>{e[i]=r})}catch{}return t.searchParams.forEach((s,r)=>{e[r]=s}),e}const an=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>He(async()=>{const{default:s}=await Promise.resolve().then(()=>We);return{default:s}},void 0,import.meta.url).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},pi=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",cn=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},at=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Ct=async(n,e)=>{await n.removeItem(e)};function mi(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",s,r,i,o,a,c,u,l=0;for(n=n.replace("-","+").replace("_","/");l<n.length;)o=e.indexOf(n.charAt(l++)),a=e.indexOf(n.charAt(l++)),c=e.indexOf(n.charAt(l++)),u=e.indexOf(n.charAt(l++)),s=o<<2|a>>4,r=(a&15)<<4|c>>2,i=(c&3)<<6|u,t=t+String.fromCharCode(s),c!=64&&r!=0&&(t=t+String.fromCharCode(r)),u!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class Et{constructor(){this.promise=new Et.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Et.promiseConstructor=Promise;function Ts(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const s=t[1];return JSON.parse(mi(s))}async function gi(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function _i(n,e){return new Promise((s,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await n(i);if(!e(i,null,o)){s(o);return}}catch(o){if(!e(i,o)){r(o);return}}})()})}function vi(n){return("0"+n.toString(16)).substr(-2)}function yi(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let r="";for(let i=0;i<56;i++)r+=t.charAt(Math.floor(Math.random()*s));return r}return crypto.getRandomValues(e),Array.from(e,vi).join("")}async function wi(n){const t=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(s);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}function bi(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ki(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await wi(n);return bi(t)}async function Ne(n,e,t=!1){const s=yi();let r=s;t&&(r+="/PASSWORD_RECOVERY"),await cn(n,`${e}-code-verifier`,r);const i=await ki(s);return[i,s===i?"plain":"s256"]}const Ti=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Ei(n){const e=n.headers.get(Nt);if(!e||!e.match(Ti))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class ns extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function A(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class Si extends ns{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function Pi(n){return A(n)&&n.name==="AuthApiError"}class ln extends ns{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Le extends ns{constructor(e,t,s,r){super(e,s,r),this.name=t,this.status=s}}class Re extends Le{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class At extends Le{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ct extends Le{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class lt extends Le{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Es extends Le{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class $t extends Le{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Rt(n){return A(n)&&n.name==="AuthRetryableFetchError"}class Ss extends Le{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}var Oi=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t};const Ie=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),ji=[502,503,504];async function Ps(n){var e;if(!pi(n))throw new $t(Ie(n),0);if(ji.includes(n.status))throw new $t(Ie(n),n.status);let t;try{t=await n.json()}catch(i){throw new ln(Ie(i),i)}let s;const r=Ei(n);if(r&&r.getTime()>=on["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new Ss(Ie(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[])}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Ss(Ie(t),n.status,t.weak_password.reasons);throw new Si(Ie(t),n.status||500,s)}const Ci=(n,e,t,s)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),t))};async function I(n,e,t,s){var r;const i=Object.assign({},s==null?void 0:s.headers);i[Nt]||(i[Nt]=on["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(r=s==null?void 0:s.query)!==null&&r!==void 0?r:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Ai(n,e,t+a,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function Ai(n,e,t,s,r,i){const o=Ci(e,s,r,i);let a;try{a=await n(t,Object.assign({},o))}catch(c){throw console.error(c),new $t(Ie(c),0)}if(a.ok||await Ps(a),s!=null&&s.noResolveJson)return a;try{return await a.json()}catch(c){await Ps(c)}}function Ee(n){var e;let t=null;Li(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=di(n.expires_in)));const s=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:s},error:null}}function Os(n){const e=Ee(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Pe(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Ri(n){return{data:n,error:null}}function Ii(n){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:r,verification_type:i}=n,o=Oi(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:s,redirect_to:r,verification_type:i},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function Di(n){return n}function Li(n){return n.access_token&&n.refresh_token&&n.expires_in}var Ui=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t};class Bi{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=an(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await I(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(A(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await I(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Pe})}catch(s){if(A(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=Ui(e,["options"]),r=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(r.new_email=s==null?void 0:s.newEmail,delete r.newEmail),await I(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Ii,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(A(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await I(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Pe})}catch(t){if(A(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,r,i,o,a,c;try{const u={nextPage:null,lastPage:0,total:0},l=await I(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:Di});if(l.error)throw l.error;const h=await l.json(),d=(o=l.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(a=l.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{const _=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(p.split(";")[1].split("=")[1]);u[`${v}Page`]=_}),u.total=parseInt(d)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(A(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await I(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Pe})}catch(t){if(A(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await I(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Pe})}catch(s){if(A(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){try{return await I(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Pe})}catch(s){if(A(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){try{const{data:t,error:s}=await I(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:s}}catch(t){if(A(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await I(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(A(t))return{data:null,error:t};throw t}}}const xi={getItem:n=>tt()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{tt()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{tt()&&globalThis.localStorage.removeItem(n)}};function js(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function Ni(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const $e={debug:!!(globalThis&&tt()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class un extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class $i extends un{}async function Mi(n,e,t){$e.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),$e.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async r=>{if(r){$e.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,r.name);try{return await t()}finally{$e.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,r.name)}}else{if(e===0)throw $e.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new $i(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if($e.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}})}Ni();const Fi={url:li,storageKey:ui,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:hi,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Qe=30*1e3,Cs=3;async function As(n,e,t){return await t()}class st{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=st.nextInstanceID,st.nextInstanceID+=1,this.instanceID>0&&ce()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},Fi),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new Bi({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=an(r.fetch),this.lock=r.lock||As,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:ce()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Mi:this.lock=As,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:tt()?this.storage=xi:(this.memoryStorage={},this.storage=js(this.memoryStorage)):(this.memoryStorage={},this.storage=js(this.memoryStorage)),ce()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${rn}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=ce()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:s}=await this._getSessionFromURL(e);if(s)return this._debug("#_initialize()","error detecting session from URL",s),(s==null?void 0:s.message)==="Identity is already linked"||(s==null?void 0:s.message)==="Identity is already linked to another user"?{error:s}:(await this._removeSession(),{error:s});const{session:r,redirectType:i}=t;return this._debug("#_initialize()","detected session in URL",r,"redirect type",i),await this._saveSession(r),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return A(e)?{error:e}:{error:new ln("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,r;try{const i=await I(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:Ee}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(A(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,s,r;try{let i;if("email"in e){const{email:l,password:h,options:d}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Ne(this.storage,this.storageKey)),i=await I(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:l,password:h,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:p},xform:Ee})}else if("phone"in e){const{phone:l,password:h,options:d}=e;i=await I(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:l,password:h,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},channel:(r=d==null?void 0:d.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Ee})}else throw new ct("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(A(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:o,options:a}=e;t=await I(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Os})}else if("phone"in e){const{phone:i,password:o,options:a}=e;t=await I(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Os})}else throw new ct("You must provide either an email or phone number and a password");const{data:s,error:r}=t;return r?{data:{user:null,session:null},error:r}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new At}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r})}catch(t){if(A(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await at(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(t??"").split("/"),{data:i,error:o}=await I(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Ee});return await Ct(this.storage,`${this.storageKey}-code-verifier`),o?{data:{user:null,session:null,redirectType:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new At}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:r??null}),error:o})}async signInWithIdToken(e){try{const{options:t,provider:s,token:r,access_token:i,nonce:o}=e,a=await I(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Ee}),{data:c,error:u}=a;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new At}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(t){if(A(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,r,i,o;try{if("email"in e){const{email:a,options:c}=e;let u=null,l=null;this.flowType==="pkce"&&([u,l]=await Ne(this.storage,this.storageKey));const{error:h}=await I(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:l},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:c}=e,{data:u,error:l}=await I(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:l}}throw new ct("You must provide either an email or phone number.")}catch(a){if(A(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,s;try{let r,i;"options"in e&&(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:a}=await I(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:Ee});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(r){if(A(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,s,r;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Ne(this.storage,this.storageKey)),await I(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Ri})}catch(i){if(A(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Re;const{error:r}=await I(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(A(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:i}=e,{error:o}=await I(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:s,type:r,options:i}=e,{data:o,error:a}=await I(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new ct("You must provide either an email or phone number and a type")}catch(t){if(A(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await at(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,l)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,l))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await I(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Pe}):await this._useSession(async t=>{var s,r,i;const{data:o,error:a}=t;if(a)throw a;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Re}:await I(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:Pe})})}catch(t){if(A(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:r,error:i}=s;if(i)throw i;if(!r.session)throw new Re;const o=r.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await Ne(this.storage,this.storageKey));const{data:u,error:l}=await I(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:o.access_token,xform:Pe});if(l)throw l;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(A(s))return{data:{user:null},error:s};throw s}}_decodeJWT(e){return Ts(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Re;const t=Date.now()/1e3;let s=t,r=!0,i=null;const o=Ts(e.access_token);if(o.exp&&(s=o.exp,r=s<=t),r){const{session:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(A(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Re;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(A(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e){try{if(!ce())throw new lt("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new lt("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new Es("Not a valid PKCE flow url.");const t=jt(window.location.href);if(e){if(!t.code)throw new Es("No code detected.");const{data:b,error:k}=await this._exchangeCodeForSession(t.code);if(k)throw k;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:b.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new lt(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:s,provider_refresh_token:r,access_token:i,refresh_token:o,expires_in:a,expires_at:c,token_type:u}=t;if(!i||!a||!o||!u)throw new lt("No session defined in URL");const l=Math.round(Date.now()/1e3),h=parseInt(a);let d=l+h;c&&(d=parseInt(c));const f=d-l;f*1e3<=Qe&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const p=d-h;l-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,d,l):l-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",p,d,l);const{data:_,error:v}=await this._getUser(i);if(v)throw v;const m={provider_token:s,provider_refresh_token:r,access_token:i,expires_in:h,expires_at:d,refresh_token:o,token_type:u,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:t.type},error:null}}catch(t){if(A(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){const e=jt(window.location.href);return!!(ce()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=jt(window.location.href),t=await at(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:r,error:i}=t;if(i)return{error:i};const o=(s=r.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Pi(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Ct(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t=fi(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,r;try{const{data:{session:i},error:o}=t;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let s=null,r=null;this.flowType==="pkce"&&([s,r]=await Ne(this.storage,this.storageKey,!0));try{return await I(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(A(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(A(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:r}=await this._useSession(async i=>{var o,a,c,u,l;const{data:h,error:d}=i;if(d)throw d;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await I(this.fetch,"GET",f,{headers:this.headers,jwt:(l=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&l!==void 0?l:void 0})});if(r)throw r;return ce()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(A(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,r;const{data:i,error:o}=t;if(o)throw o;return await I(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:void 0})})}catch(t){if(A(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await _i(async r=>(r>0&&await gi(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await I(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ee})),(r,i)=>{const o=200*Math.pow(2,r);return i&&Rt(i)&&Date.now()+o-s<Qe})}catch(s){if(this._debug(t,"error",s),A(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),ce()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await at(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const r=Math.round(Date.now()/1e3),i=((e=s.expires_at)!==null&&e!==void 0?e:1/0)<r+ks;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${ks}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Rt(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Re;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Et;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Re;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(r,"error",i),A(i)){const o={session:null,error:i};return Rt(i)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await cn(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Ct(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ce()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Qe);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((s.expires_at*1e3-e)/Qe);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Qe}ms, refresh threshold is ${Cs} ticks`),r<=Cs&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof un)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ce()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const r=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await Ne(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(a.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);r.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;return i?{data:null,error:i}:await I(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(A(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,r;const{data:i,error:o}=t;if(o)return{data:null,error:o};const{data:a,error:c}=await I(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return c?{data:null,error:c}:(!((r=a==null?void 0:a.totp)===null||r===void 0)&&r.qr_code&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(t){if(A(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:a}=await I(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(A(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;return i?{data:null,error:i}:await I(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(A(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],r=s.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:s,totp:r},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(r.access_token);let a=null;o.aal&&(a=o.aal);let c=a;((s=(t=r.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const l=o.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:l},error:null}}))}}st.nextInstanceID=0;const zi=st;class qi extends zi{constructor(e){super(e)}}var Hi=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{u(s.next(l))}catch(h){o(h)}}function c(l){try{u(s.throw(l))}catch(h){o(h)}}function u(l){l.done?i(l.value):r(l.value).then(a,c)}u((s=s.apply(n,e||[])).next())})};class Vi{constructor(e,t,s){var r,i,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=ai(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:Zr,realtime:ti,auth:Object.assign(Object.assign({},ei),{storageKey:c}),global:Yr},l=ci(s??{},u);this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=l.global.headers)!==null&&i!==void 0?i:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(h,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=l.auth)!==null&&o!==void 0?o:{},this.headers,l.global.fetch),this.fetch=ii(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},l.realtime)),this.rest=new kr(`${a}/rest/v1`,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),l.accessToken||this._listenForAuthEvents()}get functions(){return new Qn(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Kr(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Hi(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,storageKey:i,flowType:o,lock:a,debug:c},u,l){var h;const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new qi({url:this.authUrl,headers:Object.assign(Object.assign({},d),u),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,flowType:o,lock:a,debug:c,fetch:l,hasCustomAuthorizationHeader:(h="Authorization"in this.headers)!==null&&h!==void 0?h:!1})}_initRealtimeClient(e){return new Br(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.realtime.setAuth(s??null),this.changedAccessToken=s):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Wi=(n,e,t)=>new Vi(n,e,t),ye=Wi("https://omitabgbgmawzzswespr.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9taXRhYmdiZ21hd3p6c3dlc3ByIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTcyMjAyMTY4OSwiZXhwIjoyMDM3NTk3Njg5fQ.bh6DZZbeq_xTA_px6nc5irbE95o2QhYChYy2u6rA-xc"),Rs=n=>n.replaceAll(`This e-mail and any files and attachments transmitted with it
are confidential and may be legally privileged. They are intended
solely for the use of the intended recipient. Any views and
opinions expressed are those of the individual author/sender
and are not necessarily shared or endorsed by Ryanair Holdings plc
or any associated or related company. In particular e-mail
transmissions are not binding for the purposes of forming
a contract to sell airline seats, directly or via promotions,
and do not form a contractual obligation of any type.
Such contracts can only be formed in writing by post or fax,
duly signed by a senior company executive, subject to approval
by the Board of Directors.

The content of this e-mail or any file or attachment transmitted
with it may have been changed or altered without the consent
of the author. If you are not the intended recipient of this e-mail,
you are hereby notified that any review, dissemination, disclosure,
alteration, printing, circulation or transmission of, or any
action taken or omitted in reliance on this e-mail or any file
or attachment transmitted with it is prohibited and may be unlawful.

If you have received this e-mail in error
please notify Ryanair Holdings plc by contacting
Ryanair Holdings plc (Company No. 249885) / Ryanair DAC. (Company No. 104547).
Registered in the Republic Of Ireland. Airside Business Park, Swords, Co Dublin, Ireland.`,"");function Ji(n,e,t,s){var r,i,o=!1,a=t.length>=2,c=(p,_,v)=>{if(r=_,a&&(i=p),!o){let m=e(p,_,v);if(e.length<2)_(m);else return m}o=!1},u=Vn(n,c,s),l=!Array.isArray(n);function h(p){var _=t(p,i);l?(o=!0,n.set(_)):_.forEach((v,m)=>{o=!0,n[m].set(v)}),o=!1}var d=!1;function f(p){var _,v,m,b;if(d){b=p(It(u)),r(b);return}var k=u.subscribe(C=>{d?_?v=!0:_=!0:m=C});b=p(m),d=!0,r(b),k(),d=!1,v&&(b=It(u)),_&&h(b)}return{subscribe:u.subscribe,set(p){f(()=>p)},update:f}}const Gi=20,Ue=Fs([]),rs=Fs(null),ht=new Map,Is=n=>{if(ht.has(n))return;const e=setTimeout(()=>{ht.delete(n),dn(n)},1e3);ht.set(n,e)},Ki=n=>{const e=ht.get(n);e&&clearTimeout(e)};function hn(n){n.id&&Ki(n.id),Ue.update(e=>e.map(t=>t.id===n.id?{...t,...n}:t))}function Xi(n){Ue.update(e=>[n,...e].slice(0,Gi))}function Qi(n){It(Ue).find(e=>e.id===n.id)?hn(n):Xi(n)}function Yi(n){Ue.update(e=>(n?Is(n):e.forEach(t=>{Is(t.id)}),e.map(t=>t.id===n||n===void 0?{...t,visible:!1}:t)))}function dn(n){Ue.update(e=>n===void 0?[]:e.filter(t=>t.id!==n))}function Zi(n){rs.set(n)}function eo(n){let e;rs.update(t=>(e=n-(t||0),null)),Ue.update(t=>t.map(s=>({...s,pauseDuration:s.pauseDuration+e})))}const to={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3};function so(n={}){return{toasts:Ji(Ue,t=>t.map(s=>{var r,i;return{...n,...n[s.type],...s,duration:s.duration||((r=n[s.type])==null?void 0:r.duration)||(n==null?void 0:n.duration)||to[s.type],style:[n.style,(i=n[s.type])==null?void 0:i.style,s.style].join(";")}}),t=>t),pausedAt:rs}}const no=n=>typeof n=="function",Ds=(n,e)=>no(n)?n(e):n,ro=(()=>{let n=0;return()=>(n+=1,n.toString())})(),pt=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){const e=matchMedia("(prefers-reduced-motion: reduce)");n=!e||e.matches}return n}})(),io=(n,e="blank",t)=>({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...t,id:(t==null?void 0:t.id)||ro()}),it=n=>(e,t)=>{const s=io(e,n,t);return Qi(s),s.id},q=(n,e)=>it("blank")(n,e);q.error=it("error");q.success=it("success");q.loading=it("loading");q.custom=it("custom");q.dismiss=n=>{Yi(n)};q.remove=n=>dn(n);q.promise=(n,e,t)=>{const s=q.loading(e.loading,{...t,...t==null?void 0:t.loading});return n.then(r=>(q.success(Ds(e.success,r),{id:s,...t,...t==null?void 0:t.success}),r)).catch(r=>{q.error(Ds(e.error,r),{id:s,...t,...t==null?void 0:t.error})}),n};function oo(n,e,t){const{reverseOrder:s,gutter:r=8,defaultPosition:i}=t||{},o=e.filter(l=>(l.position||i)===(n.position||i)&&l.height),a=o.findIndex(l=>l.id===n.id),c=o.filter((l,h)=>h<a&&l.visible).length;return o.filter(l=>l.visible).slice(...s?[c+1]:[0,c]).reduce((l,h)=>l+(h.height||0)+r,0)}const ao={startPause(){Zi(Date.now())},endPause(){eo(Date.now())},updateHeight:(n,e)=>{hn({id:n,height:e})},calculateOffset:oo};function Ls(n){const{toasts:e,pausedAt:t}=so(n),s=new Map;let r;const i=[t.subscribe(o=>{if(o){for(const[,a]of s)clearTimeout(a);s.clear()}r=o}),e.subscribe(o=>{if(r)return;const a=Date.now();for(const c of o){if(s.has(c.id)||c.duration===1/0)continue;const u=(c.duration||0)+c.pauseDuration-(a-c.createdAt);if(u<0)return c.visible&&q.dismiss(c.id),null;s.set(c.id,setTimeout(()=>q.dismiss(c.id),u))}})];return Nn(()=>{for(const o of i)o()}),{toasts:e,handlers:ao}}const co="node_modules/svelte-french-toast/dist/components/CheckmarkIcon.svelte";function Mt(n){let e;const t={c:function(){e=O("div"),this.h()},l:function(r){e=j(r,"DIV",{class:!0}),R(e).forEach(y),this.h()},h:function(){g(e,"class","svelte-11kvm4p"),B(e,"--primary",n[0]),B(e,"--secondary",n[1]),T(e,co,5,0,148)},m:function(r,i){M(r,e,i)},p:function(r,[i]){i&1&&B(e,"--primary",r[0]),i&2&&B(e,"--secondary",r[1])},i:ue,o:ue,d:function(r){r&&y(e)}};return S("SvelteRegisterBlock",{block:t,id:Mt.name,type:"component",source:"",ctx:n}),t}function lo(n,e,t){let{$$slots:s={},$$scope:r}=e;Te("CheckmarkIcon",s,[]);let{primary:i="#61d345"}=e,{secondary:o="#fff"}=e;const a=["primary","secondary"];return Object.keys(e).forEach(c=>{!~a.indexOf(c)&&c.slice(0,2)!=="$$"&&c!=="slot"&&console.warn(`<CheckmarkIcon> was created with unknown prop '${c}'`)}),n.$$set=c=>{"primary"in c&&t(0,i=c.primary),"secondary"in c&&t(1,o=c.secondary)},n.$capture_state=()=>({primary:i,secondary:o}),n.$inject_state=c=>{"primary"in c&&t(0,i=c.primary),"secondary"in c&&t(1,o=c.secondary)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[i,o]}class fn extends be{constructor(e){super(e),ke(this,e,lo,Mt,we,{primary:0,secondary:1}),S("SvelteRegisterComponent",{component:this,tagName:"CheckmarkIcon",options:e,id:Mt.name})}get primary(){throw new Error("<CheckmarkIcon>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set primary(e){throw new Error("<CheckmarkIcon>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get secondary(){throw new Error("<CheckmarkIcon>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set secondary(e){throw new Error("<CheckmarkIcon>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const uo="node_modules/svelte-french-toast/dist/components/ErrorIcon.svelte";function Ft(n){let e;const t={c:function(){e=O("div"),this.h()},l:function(r){e=j(r,"DIV",{class:!0}),R(e).forEach(y),this.h()},h:function(){g(e,"class","svelte-1ee93ns"),B(e,"--primary",n[0]),B(e,"--secondary",n[1]),T(e,uo,5,0,148)},m:function(r,i){M(r,e,i)},p:function(r,[i]){i&1&&B(e,"--primary",r[0]),i&2&&B(e,"--secondary",r[1])},i:ue,o:ue,d:function(r){r&&y(e)}};return S("SvelteRegisterBlock",{block:t,id:Ft.name,type:"component",source:"",ctx:n}),t}function ho(n,e,t){let{$$slots:s={},$$scope:r}=e;Te("ErrorIcon",s,[]);let{primary:i="#ff4b4b"}=e,{secondary:o="#fff"}=e;const a=["primary","secondary"];return Object.keys(e).forEach(c=>{!~a.indexOf(c)&&c.slice(0,2)!=="$$"&&c!=="slot"&&console.warn(`<ErrorIcon> was created with unknown prop '${c}'`)}),n.$$set=c=>{"primary"in c&&t(0,i=c.primary),"secondary"in c&&t(1,o=c.secondary)},n.$capture_state=()=>({primary:i,secondary:o}),n.$inject_state=c=>{"primary"in c&&t(0,i=c.primary),"secondary"in c&&t(1,o=c.secondary)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[i,o]}class pn extends be{constructor(e){super(e),ke(this,e,ho,Ft,we,{primary:0,secondary:1}),S("SvelteRegisterComponent",{component:this,tagName:"ErrorIcon",options:e,id:Ft.name})}get primary(){throw new Error("<ErrorIcon>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set primary(e){throw new Error("<ErrorIcon>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get secondary(){throw new Error("<ErrorIcon>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set secondary(e){throw new Error("<ErrorIcon>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const fo="node_modules/svelte-french-toast/dist/components/LoaderIcon.svelte";function zt(n){let e;const t={c:function(){e=O("div"),this.h()},l:function(r){e=j(r,"DIV",{class:!0}),R(e).forEach(y),this.h()},h:function(){g(e,"class","svelte-1j7dflg"),B(e,"--primary",n[0]),B(e,"--secondary",n[1]),T(e,fo,5,0,151)},m:function(r,i){M(r,e,i)},p:function(r,[i]){i&1&&B(e,"--primary",r[0]),i&2&&B(e,"--secondary",r[1])},i:ue,o:ue,d:function(r){r&&y(e)}};return S("SvelteRegisterBlock",{block:t,id:zt.name,type:"component",source:"",ctx:n}),t}function po(n,e,t){let{$$slots:s={},$$scope:r}=e;Te("LoaderIcon",s,[]);let{primary:i="#616161"}=e,{secondary:o="#e0e0e0"}=e;const a=["primary","secondary"];return Object.keys(e).forEach(c=>{!~a.indexOf(c)&&c.slice(0,2)!=="$$"&&c!=="slot"&&console.warn(`<LoaderIcon> was created with unknown prop '${c}'`)}),n.$$set=c=>{"primary"in c&&t(0,i=c.primary),"secondary"in c&&t(1,o=c.secondary)},n.$capture_state=()=>({primary:i,secondary:o}),n.$inject_state=c=>{"primary"in c&&t(0,i=c.primary),"secondary"in c&&t(1,o=c.secondary)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[i,o]}class mn extends be{constructor(e){super(e),ke(this,e,po,zt,we,{primary:0,secondary:1}),S("SvelteRegisterComponent",{component:this,tagName:"LoaderIcon",options:e,id:zt.name})}get primary(){throw new Error("<LoaderIcon>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set primary(e){throw new Error("<LoaderIcon>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get secondary(){throw new Error("<LoaderIcon>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set secondary(e){throw new Error("<LoaderIcon>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const is="node_modules/svelte-french-toast/dist/components/ToastIcon.svelte";function gn(n){let e,t,s,r;const i=[n[0]];let o={};for(let u=0;u<i.length;u+=1)o=mt(o,i[u]);t=new mn({props:o,$$inline:!0});let a=n[2]!=="loading"&&qt(n);const c={c:function(){e=O("div"),H(t.$$.fragment),s=G(),a&&a.c(),this.h()},l:function(l){e=j(l,"DIV",{class:!0});var h=R(e);Y(t.$$.fragment,h),s=K(h),a&&a.l(h),h.forEach(y),this.h()},h:function(){g(e,"class","indicator svelte-1kgeier"),T(e,is,13,1,390)},m:function(l,h){M(l,e,h),V(t,e,null),w(e,s),a&&a.m(e,null),r=!0},p:function(l,h){const d=h&1?_t(i,[Qt(l[0])]):{};t.$set(d),l[2]!=="loading"?a?(a.p(l,h),h&4&&L(a,1)):(a=qt(l),a.c(),L(a,1),a.m(e,null)):a&&(ge(),U(a,1,1,()=>{a=null}),_e())},i:function(l){r||(L(t.$$.fragment,l),L(a),r=!0)},o:function(l){U(t.$$.fragment,l),U(a),r=!1},d:function(l){l&&y(e),W(t),a&&a.d()}};return S("SvelteRegisterBlock",{block:c,id:gn.name,type:"if",source:"(13:27) ",ctx:n}),c}function _n(n){let e,t,s;var r=n[1];function i(a,c){return{$$inline:!0}}r&&(e=ze(r,i()));const o={c:function(){e&&H(e.$$.fragment),t=me()},l:function(c){e&&Y(e.$$.fragment,c),t=me()},m:function(c,u){e&&V(e,c,u),M(c,t,u),s=!0},p:function(c,u){if(u&2&&r!==(r=c[1])){if(e){ge();const l=e;U(l.$$.fragment,1,0,()=>{W(l,1)}),_e()}r?(e=ze(r,i()),H(e.$$.fragment),L(e.$$.fragment,1),V(e,t.parentNode,t)):e=null}},i:function(c){s||(e&&L(e.$$.fragment,c),s=!0)},o:function(c){e&&U(e.$$.fragment,c),s=!1},d:function(c){c&&y(t),e&&W(e,c)}};return S("SvelteRegisterBlock",{block:o,id:_n.name,type:"if",source:"(11:38) ",ctx:n}),o}function vn(n){let e,t;const s={c:function(){e=O("div"),t=Oe(n[1]),this.h()},l:function(i){e=j(i,"DIV",{class:!0});var o=R(e);t=je(o,n[1]),o.forEach(y),this.h()},h:function(){g(e,"class","animated svelte-1kgeier"),T(e,is,9,1,253)},m:function(i,o){M(i,e,o),w(e,t)},p:function(i,o){o&2&&ft(t,i[1])},i:ue,o:ue,d:function(i){i&&y(e)}};return S("SvelteRegisterBlock",{block:s,id:vn.name,type:"if",source:"(9:0) {#if typeof icon === 'string'}",ctx:n}),s}function qt(n){let e,t,s,r;const i=[wn,yn],o=[];function a(u,l){return u[2]==="error"?0:1}t=a(n),s=o[t]=i[t](n);const c={c:function(){e=O("div"),s.c(),this.h()},l:function(l){e=j(l,"DIV",{class:!0});var h=R(e);s.l(h),h.forEach(y),this.h()},h:function(){g(e,"class","status svelte-1kgeier"),T(e,is,16,3,476)},m:function(l,h){M(l,e,h),o[t].m(e,null),r=!0},p:function(l,h){let d=t;t=a(l),t===d?o[t].p(l,h):(ge(),U(o[d],1,1,()=>{o[d]=null}),_e(),s=o[t],s?s.p(l,h):(s=o[t]=i[t](l),s.c()),L(s,1),s.m(e,null))},i:function(l){r||(L(s),r=!0)},o:function(l){U(s),r=!1},d:function(l){l&&y(e),o[t].d()}};return S("SvelteRegisterBlock",{block:c,id:qt.name,type:"if",source:"(16:2) {#if type !== 'loading'}",ctx:n}),c}function yn(n){let e,t;const s=[n[0]];let r={};for(let o=0;o<s.length;o+=1)r=mt(r,s[o]);e=new fn({props:r,$$inline:!0});const i={c:function(){H(e.$$.fragment)},l:function(a){Y(e.$$.fragment,a)},m:function(a,c){V(e,a,c),t=!0},p:function(a,c){const u=c&1?_t(s,[Qt(a[0])]):{};e.$set(u)},i:function(a){t||(L(e.$$.fragment,a),t=!0)},o:function(a){U(e.$$.fragment,a),t=!1},d:function(a){W(e,a)}};return S("SvelteRegisterBlock",{block:i,id:yn.name,type:"else",source:"(20:4) {:else}",ctx:n}),i}function wn(n){let e,t;const s=[n[0]];let r={};for(let o=0;o<s.length;o+=1)r=mt(r,s[o]);e=new pn({props:r,$$inline:!0});const i={c:function(){H(e.$$.fragment)},l:function(a){Y(e.$$.fragment,a)},m:function(a,c){V(e,a,c),t=!0},p:function(a,c){const u=c&1?_t(s,[Qt(a[0])]):{};e.$set(u)},i:function(a){t||(L(e.$$.fragment,a),t=!0)},o:function(a){U(e.$$.fragment,a),t=!1},d:function(a){W(e,a)}};return S("SvelteRegisterBlock",{block:i,id:wn.name,type:"if",source:"(18:4) {#if type === 'error'}",ctx:n}),i}function Ht(n){let e,t,s,r;const i=[vn,_n,gn],o=[];function a(u,l){return typeof u[1]=="string"?0:typeof u[1]<"u"?1:u[2]!=="blank"?2:-1}~(e=a(n))&&(t=o[e]=i[e](n));const c={c:function(){t&&t.c(),s=me()},l:function(l){t&&t.l(l),s=me()},m:function(l,h){~e&&o[e].m(l,h),M(l,s,h),r=!0},p:function(l,[h]){let d=e;e=a(l),e===d?~e&&o[e].p(l,h):(t&&(ge(),U(o[d],1,1,()=>{o[d]=null}),_e()),~e?(t=o[e],t?t.p(l,h):(t=o[e]=i[e](l),t.c()),L(t,1),t.m(s.parentNode,s)):t=null)},i:function(l){r||(L(t),r=!0)},o:function(l){U(t),r=!1},d:function(l){l&&y(s),~e&&o[e].d(l)}};return S("SvelteRegisterBlock",{block:c,id:Ht.name,type:"component",source:"",ctx:n}),c}function mo(n,e,t){let s,r,i,{$$slots:o={},$$scope:a}=e;Te("ToastIcon",o,[]);let{toast:c}=e;n.$$.on_mount.push(function(){c===void 0&&!("toast"in e||n.$$.bound[n.$$.props.toast])&&console.warn("<ToastIcon> was created without expected prop 'toast'")});const u=["toast"];return Object.keys(e).forEach(l=>{!~u.indexOf(l)&&l.slice(0,2)!=="$$"&&l!=="slot"&&console.warn(`<ToastIcon> was created with unknown prop '${l}'`)}),n.$$set=l=>{"toast"in l&&t(3,c=l.toast)},n.$capture_state=()=>({CheckmarkIcon:fn,ErrorIcon:pn,LoaderIcon:mn,toast:c,iconTheme:i,icon:r,type:s}),n.$inject_state=l=>{"toast"in l&&t(3,c=l.toast),"iconTheme"in l&&t(0,i=l.iconTheme),"icon"in l&&t(1,r=l.icon),"type"in l&&t(2,s=l.type)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{n.$$.dirty&8&&t(2,{type:s,icon:r,iconTheme:i}=c,s,(t(1,r),t(3,c)),(t(0,i),t(3,c)))},[i,r,s,c]}class St extends be{constructor(e){super(e),ke(this,e,mo,Ht,we,{toast:3}),S("SvelteRegisterComponent",{component:this,tagName:"ToastIcon",options:e,id:Ht.name})}get toast(){throw new Error("<ToastIcon>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set toast(e){throw new Error("<ToastIcon>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const go="node_modules/svelte-french-toast/dist/components/ToastMessage.svelte";function bn(n){let e,t,s;var r=n[0].message;function i(a,c){return{props:{toast:a[0]},$$inline:!0}}r&&(e=ze(r,i(n)));const o={c:function(){e&&H(e.$$.fragment),t=me()},l:function(c){e&&Y(e.$$.fragment,c),t=me()},m:function(c,u){e&&V(e,c,u),M(c,t,u),s=!0},p:function(c,u){if(u&1&&r!==(r=c[0].message)){if(e){ge();const l=e;U(l.$$.fragment,1,0,()=>{W(l,1)}),_e()}r?(e=ze(r,i(c)),H(e.$$.fragment),L(e.$$.fragment,1),V(e,t.parentNode,t)):e=null}else if(r){const l={};u&1&&(l.toast=c[0]),e.$set(l)}},i:function(c){s||(e&&L(e.$$.fragment,c),s=!0)},o:function(c){e&&U(e.$$.fragment,c),s=!1},d:function(c){c&&y(t),e&&W(e,c)}};return S("SvelteRegisterBlock",{block:o,id:bn.name,type:"else",source:"(7:1) {:else}",ctx:n}),o}function kn(n){let e=n[0].message+"",t;const s={c:function(){t=Oe(e)},l:function(i){t=je(i,e)},m:function(i,o){M(i,t,o)},p:function(i,o){o&1&&e!==(e=i[0].message+"")&&ft(t,e)},i:ue,o:ue,d:function(i){i&&y(t)}};return S("SvelteRegisterBlock",{block:s,id:kn.name,type:"if",source:"(5:1) {#if typeof toast.message === 'string'}",ctx:n}),s}function Vt(n){let e,t,s,r;const i=[kn,bn],o=[];function a(h,d){return typeof h[0].message=="string"?0:1}t=a(n),s=o[t]=i[t](n);let c=[{class:"message"},n[0].ariaProps],u={};for(let h=0;h<c.length;h+=1)u=mt(u,c[h]);const l={c:function(){e=O("div"),s.c(),this.h()},l:function(d){e=j(d,"DIV",{class:!0});var f=R(e);s.l(f),f.forEach(y),this.h()},h:function(){ds(e,u),Ze(e,"svelte-1nauejd",!0),T(e,go,3,0,37)},m:function(d,f){M(d,e,f),o[t].m(e,null),r=!0},p:function(d,[f]){let p=t;t=a(d),t===p?o[t].p(d,f):(ge(),U(o[p],1,1,()=>{o[p]=null}),_e(),s=o[t],s?s.p(d,f):(s=o[t]=i[t](d),s.c()),L(s,1),s.m(e,null)),ds(e,u=_t(c,[{class:"message"},f&1&&d[0].ariaProps])),Ze(e,"svelte-1nauejd",!0)},i:function(d){r||(L(s),r=!0)},o:function(d){U(s),r=!1},d:function(d){d&&y(e),o[t].d()}};return S("SvelteRegisterBlock",{block:l,id:Vt.name,type:"component",source:"",ctx:n}),l}function _o(n,e,t){let{$$slots:s={},$$scope:r}=e;Te("ToastMessage",s,[]);let{toast:i}=e;n.$$.on_mount.push(function(){i===void 0&&!("toast"in e||n.$$.bound[n.$$.props.toast])&&console.warn("<ToastMessage> was created without expected prop 'toast'")});const o=["toast"];return Object.keys(e).forEach(a=>{!~o.indexOf(a)&&a.slice(0,2)!=="$$"&&a!=="slot"&&console.warn(`<ToastMessage> was created with unknown prop '${a}'`)}),n.$$set=a=>{"toast"in a&&t(0,i=a.toast)},n.$capture_state=()=>({toast:i}),n.$inject_state=a=>{"toast"in a&&t(0,i=a.toast)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[i]}class Ge extends be{constructor(e){super(e),ke(this,e,_o,Vt,we,{toast:0}),S("SvelteRegisterComponent",{component:this,tagName:"ToastMessage",options:e,id:Vt.name})}get toast(){throw new Error("<ToastMessage>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set toast(e){throw new Error("<ToastMessage>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const vo="node_modules/svelte-french-toast/dist/components/ToastBar.svelte",yo=n=>({toast:n&1}),Us=n=>({ToastIcon:St,ToastMessage:Ge,toast:n[0]});function Tn(n){let e;const t=n[6].default,s=xs(t,n,n[7],Us),r=s||Sn(n),i={c:function(){r&&r.c()},l:function(a){r&&r.l(a)},m:function(a,c){r&&r.m(a,c),e=!0},p:function(a,c){s?s.p&&(!e||c&129)&&Ns(s,t,a,a[7],e?Ms(t,a[7],c,yo):$s(a[7]),Us):r&&r.p&&(!e||c&1)&&r.p(a,e?c:-1)},i:function(a){e||(L(r,a),e=!0)},o:function(a){U(r,a),e=!1},d:function(a){r&&r.d(a)}};return S("SvelteRegisterBlock",{block:i,id:Tn.name,type:"else",source:"(28:1) {:else}",ctx:n}),i}function En(n){let e,t,s;var r=n[2];function i(a,c){return{props:{$$slots:{message:[On],icon:[Pn]},$$scope:{ctx:a}},$$inline:!0}}r&&(e=ze(r,i(n)));const o={c:function(){e&&H(e.$$.fragment),t=me()},l:function(c){e&&Y(e.$$.fragment,c),t=me()},m:function(c,u){e&&V(e,c,u),M(c,t,u),s=!0},p:function(c,u){if(u&4&&r!==(r=c[2])){if(e){ge();const l=e;U(l.$$.fragment,1,0,()=>{W(l,1)}),_e()}r?(e=ze(r,i(c)),H(e.$$.fragment),L(e.$$.fragment,1),V(e,t.parentNode,t)):e=null}else if(r){const l={};u&129&&(l.$$scope={dirty:u,ctx:c}),e.$set(l)}},i:function(c){s||(e&&L(e.$$.fragment,c),s=!0)},o:function(c){e&&U(e.$$.fragment,c),s=!1},d:function(c){c&&y(t),e&&W(e,c)}};return S("SvelteRegisterBlock",{block:o,id:En.name,type:"if",source:"(23:1) {#if Component}",ctx:n}),o}function Sn(n){let e,t,s,r;e=new St({props:{toast:n[0]},$$inline:!0}),s=new Ge({props:{toast:n[0]},$$inline:!0});const i={c:function(){H(e.$$.fragment),t=G(),H(s.$$.fragment)},l:function(a){Y(e.$$.fragment,a),t=K(a),Y(s.$$.fragment,a)},m:function(a,c){V(e,a,c),M(a,t,c),V(s,a,c),r=!0},p:function(a,c){const u={};c&1&&(u.toast=a[0]),e.$set(u);const l={};c&1&&(l.toast=a[0]),s.$set(l)},i:function(a){r||(L(e.$$.fragment,a),L(s.$$.fragment,a),r=!0)},o:function(a){U(e.$$.fragment,a),U(s.$$.fragment,a),r=!1},d:function(a){a&&y(t),W(e,a),W(s,a)}};return S("SvelteRegisterBlock",{block:i,id:Sn.name,type:"fallback",source:"(29:43)     ",ctx:n}),i}function Pn(n){let e,t;e=new St({props:{toast:n[0],slot:"icon"},$$inline:!0});const s={c:function(){H(e.$$.fragment)},l:function(i){Y(e.$$.fragment,i)},m:function(i,o){V(e,i,o),t=!0},p:function(i,o){const a={};o&1&&(a.toast=i[0]),e.$set(a)},i:function(i){t||(L(e.$$.fragment,i),t=!0)},o:function(i){U(e.$$.fragment,i),t=!1},d:function(i){W(e,i)}};return S("SvelteRegisterBlock",{block:s,id:Pn.name,type:"slot",source:"(25:3) ",ctx:n}),s}function On(n){let e,t;e=new Ge({props:{toast:n[0],slot:"message"},$$inline:!0});const s={c:function(){H(e.$$.fragment)},l:function(i){Y(e.$$.fragment,i)},m:function(i,o){V(e,i,o),t=!0},p:function(i,o){const a={};o&1&&(a.toast=i[0]),e.$set(a)},i:function(i){t||(L(e.$$.fragment,i),t=!0)},o:function(i){U(e.$$.fragment,i),t=!1},d:function(i){W(e,i)}};return S("SvelteRegisterBlock",{block:s,id:On.name,type:"slot",source:"(26:3) ",ctx:n}),s}function Wt(n){let e,t,s,r,i,o;const a=[En,Tn],c=[];function u(h,d){return h[2]?0:1}t=u(n),s=c[t]=a[t](n);const l={c:function(){e=O("div"),s.c(),this.h()},l:function(d){e=j(d,"DIV",{class:!0,style:!0});var f=R(e);s.l(f),f.forEach(y),this.h()},h:function(){g(e,"class",r="base "+(n[0].height?n[4]:"transparent")+" "+(n[0].className||"")+" svelte-ug60r4"),g(e,"style",i=n[1]+"; "+n[0].style),B(e,"--factor",n[3]),T(e,vo,17,0,540)},m:function(d,f){M(d,e,f),c[t].m(e,null),o=!0},p:function(d,[f]){let p=t;t=u(d),t===p?c[t].p(d,f):(ge(),U(c[p],1,1,()=>{c[p]=null}),_e(),s=c[t],s?s.p(d,f):(s=c[t]=a[t](d),s.c()),L(s,1),s.m(e,null)),(!o||f&17&&r!==(r="base "+(d[0].height?d[4]:"transparent")+" "+(d[0].className||"")+" svelte-ug60r4"))&&g(e,"class",r),(!o||f&3&&i!==(i=d[1]+"; "+d[0].style))&&g(e,"style",i);const _=f&3;(f&11||_)&&B(e,"--factor",d[3])},i:function(d){o||(L(s),o=!0)},o:function(d){U(s),o=!1},d:function(d){d&&y(e),c[t].d()}};return S("SvelteRegisterBlock",{block:l,id:Wt.name,type:"component",source:"",ctx:n}),l}function wo(n,e,t){let{$$slots:s={},$$scope:r}=e;Te("ToastBar",s,["default"]);let{toast:i}=e,{position:o=void 0}=e,{style:a=""}=e,{Component:c=void 0}=e,u,l;n.$$.on_mount.push(function(){i===void 0&&!("toast"in e||n.$$.bound[n.$$.props.toast])&&console.warn("<ToastBar> was created without expected prop 'toast'")});const h=["toast","position","style","Component"];return Object.keys(e).forEach(d=>{!~h.indexOf(d)&&d.slice(0,2)!=="$$"&&d!=="slot"&&console.warn(`<ToastBar> was created with unknown prop '${d}'`)}),n.$$set=d=>{"toast"in d&&t(0,i=d.toast),"position"in d&&t(5,o=d.position),"style"in d&&t(1,a=d.style),"Component"in d&&t(2,c=d.Component),"$$scope"in d&&t(7,r=d.$$scope)},n.$capture_state=()=>({ToastIcon:St,prefersReducedMotion:pt,ToastMessage:Ge,toast:i,position:o,style:a,Component:c,factor:u,animation:l}),n.$inject_state=d=>{"toast"in d&&t(0,i=d.toast),"position"in d&&t(5,o=d.position),"style"in d&&t(1,a=d.style),"Component"in d&&t(2,c=d.Component),"factor"in d&&t(3,u=d.factor),"animation"in d&&t(4,l=d.animation)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{if(n.$$.dirty&33){const d=(i.position||o||"top-center").includes("top");t(3,u=d?1:-1);const[f,p]=pt()?["fadeIn","fadeOut"]:["enter","exit"];t(4,l=i.visible?f:p)}},[i,a,c,u,l,o,s,r]}class jn extends be{constructor(e){super(e),ke(this,e,wo,Wt,we,{toast:0,position:5,style:1,Component:2}),S("SvelteRegisterComponent",{component:this,tagName:"ToastBar",options:e,id:Wt.name})}get toast(){throw new Error("<ToastBar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set toast(e){throw new Error("<ToastBar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get position(){throw new Error("<ToastBar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set position(e){throw new Error("<ToastBar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get style(){throw new Error("<ToastBar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set style(e){throw new Error("<ToastBar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get Component(){throw new Error("<ToastBar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set Component(e){throw new Error("<ToastBar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const bo="node_modules/svelte-french-toast/dist/components/ToastWrapper.svelte",ko=n=>({toast:n&1}),Bs=n=>({toast:n[0]});function Cn(n){let e;const t=n[8].default,s=xs(t,n,n[7],Bs),r=s||Rn(n),i={c:function(){r&&r.c()},l:function(a){r&&r.l(a)},m:function(a,c){r&&r.m(a,c),e=!0},p:function(a,c){s?s.p&&(!e||c&129)&&Ns(s,t,a,a[7],e?Ms(t,a[7],c,ko):$s(a[7]),Bs):r&&r.p&&(!e||c&1)&&r.p(a,e?c:-1)},i:function(a){e||(L(r,a),e=!0)},o:function(a){U(r,a),e=!1},d:function(a){r&&r.d(a)}};return S("SvelteRegisterBlock",{block:i,id:Cn.name,type:"else",source:"(34:1) {:else}",ctx:n}),i}function An(n){let e,t;e=new Ge({props:{toast:n[0]},$$inline:!0});const s={c:function(){H(e.$$.fragment)},l:function(i){Y(e.$$.fragment,i)},m:function(i,o){V(e,i,o),t=!0},p:function(i,o){const a={};o&1&&(a.toast=i[0]),e.$set(a)},i:function(i){t||(L(e.$$.fragment,i),t=!0)},o:function(i){U(e.$$.fragment,i),t=!1},d:function(i){W(e,i)}};return S("SvelteRegisterBlock",{block:s,id:An.name,type:"if",source:"(32:1) {#if toast.type === 'custom'}",ctx:n}),s}function Rn(n){let e,t;e=new jn({props:{toast:n[0],position:n[0].position},$$inline:!0});const s={c:function(){H(e.$$.fragment)},l:function(i){Y(e.$$.fragment,i)},m:function(i,o){V(e,i,o),t=!0},p:function(i,o){const a={};o&1&&(a.toast=i[0]),o&1&&(a.position=i[0].position),e.$set(a)},i:function(i){t||(L(e.$$.fragment,i),t=!0)},o:function(i){U(e.$$.fragment,i),t=!1},d:function(i){W(e,i)}};return S("SvelteRegisterBlock",{block:s,id:Rn.name,type:"fallback",source:"(35:16)     ",ctx:n}),s}function Jt(n){let e,t,s,r;const i=[An,Cn],o=[];function a(u,l){return u[0].type==="custom"?0:1}t=a(n),s=o[t]=i[t](n);const c={c:function(){e=O("div"),s.c(),this.h()},l:function(l){e=j(l,"DIV",{class:!0});var h=R(e);s.l(h),h.forEach(y),this.h()},h:function(){g(e,"class","wrapper svelte-v01oml"),Ze(e,"active",n[0].visible),Ze(e,"transition",!pt()),B(e,"--factor",n[3]),B(e,"--offset",n[0].offset),B(e,"top",n[5]),B(e,"bottom",n[4]),B(e,"justify-content",n[2]),T(e,bo,20,0,667)},m:function(l,h){M(l,e,h),o[t].m(e,null),n[9](e),r=!0},p:function(l,[h]){let d=t;t=a(l),t===d?o[t].p(l,h):(ge(),U(o[d],1,1,()=>{o[d]=null}),_e(),s=o[t],s?s.p(l,h):(s=o[t]=i[t](l),s.c()),L(s,1),s.m(e,null)),(!r||h&1)&&Ze(e,"active",l[0].visible),h&8&&B(e,"--factor",l[3]),h&1&&B(e,"--offset",l[0].offset),h&32&&B(e,"top",l[5]),h&16&&B(e,"bottom",l[4]),h&4&&B(e,"justify-content",l[2])},i:function(l){r||(L(s),r=!0)},o:function(l){U(s),r=!1},d:function(l){l&&y(e),o[t].d(),n[9](null)}};return S("SvelteRegisterBlock",{block:c,id:Jt.name,type:"component",source:"",ctx:n}),c}function To(n,e,t){let s,r,i,o,{$$slots:a={},$$scope:c}=e;Te("ToastWrapper",a,["default"]);let{toast:u}=e,{setHeight:l}=e,h;dt(()=>{l(h.getBoundingClientRect().height)}),n.$$.on_mount.push(function(){u===void 0&&!("toast"in e||n.$$.bound[n.$$.props.toast])&&console.warn("<ToastWrapper> was created without expected prop 'toast'"),l===void 0&&!("setHeight"in e||n.$$.bound[n.$$.props.setHeight])&&console.warn("<ToastWrapper> was created without expected prop 'setHeight'")});const d=["toast","setHeight"];Object.keys(e).forEach(p=>{!~d.indexOf(p)&&p.slice(0,2)!=="$$"&&p!=="slot"&&console.warn(`<ToastWrapper> was created with unknown prop '${p}'`)});function f(p){$n[p?"unshift":"push"](()=>{h=p,t(1,h)})}return n.$$set=p=>{"toast"in p&&t(0,u=p.toast),"setHeight"in p&&t(6,l=p.setHeight),"$$scope"in p&&t(7,c=p.$$scope)},n.$capture_state=()=>({onMount:dt,prefersReducedMotion:pt,ToastBar:jn,ToastMessage:Ge,toast:u,setHeight:l,wrapperEl:h,justifyContent:o,factor:i,bottom:r,top:s}),n.$inject_state=p=>{"toast"in p&&t(0,u=p.toast),"setHeight"in p&&t(6,l=p.setHeight),"wrapperEl"in p&&t(1,h=p.wrapperEl),"justifyContent"in p&&t(2,o=p.justifyContent),"factor"in p&&t(3,i=p.factor),"bottom"in p&&t(4,r=p.bottom),"top"in p&&t(5,s=p.top)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{var p,_,v,m,b,k;n.$$.dirty&1&&t(5,s=(p=u.position)!=null&&p.includes("top")?0:null),n.$$.dirty&1&&t(4,r=(_=u.position)!=null&&_.includes("bottom")?0:null),n.$$.dirty&1&&t(3,i=(v=u.position)!=null&&v.includes("top")?1:-1),n.$$.dirty&1&&t(2,o=((m=u.position)==null?void 0:m.includes("center"))&&"center"||(((b=u.position)==null?void 0:b.includes("right"))||((k=u.position)==null?void 0:k.includes("end")))&&"flex-end"||null)},[u,h,o,i,r,s,l,c,a,f]}class In extends be{constructor(e){super(e),ke(this,e,To,Jt,we,{toast:0,setHeight:6}),S("SvelteRegisterComponent",{component:this,tagName:"ToastWrapper",options:e,id:Jt.name})}get toast(){throw new Error("<ToastWrapper>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set toast(e){throw new Error("<ToastWrapper>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get setHeight(){throw new Error("<ToastWrapper>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set setHeight(e){throw new Error("<ToastWrapper>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Eo="node_modules/svelte-french-toast/dist/components/Toaster.svelte";function ut(n,e,t){const s=n.slice();return s[11]=e[t],s}function Gt(n,e){let t,s,r;function i(...a){return e[10](e[11],...a)}s=new In({props:{toast:e[11],setHeight:i},$$inline:!0});const o={key:n,first:null,c:function(){t=me(),H(s.$$.fragment),this.h()},l:function(c){t=me(),Y(s.$$.fragment,c),this.h()},h:function(){this.first=t},m:function(c,u){M(c,t,u),V(s,c,u),r=!0},p:function(c,u){e=c;const l={};u&4&&(l.toast=e[11]),u&4&&(l.setHeight=i),s.$set(l)},i:function(c){r||(L(s.$$.fragment,c),r=!0)},o:function(c){U(s.$$.fragment,c),r=!1},d:function(c){c&&y(t),W(s,c)}};return S("SvelteRegisterBlock",{block:o,id:Gt.name,type:"each",source:"(30:1) {#each _toasts as toast (toast.id)}",ctx:e}),o}function Kt(n){let e,t=[],s=new Map,r,i,o,a,c=fs(n[2]);const u=h=>h[11].id;ps(n,c,ut,u);for(let h=0;h<c.length;h+=1){let d=ut(n,c,h),f=u(d);s.set(f,t[h]=Gt(f,d))}const l={c:function(){e=O("div");for(let d=0;d<t.length;d+=1)t[d].c();this.h()},l:function(d){e=j(d,"DIV",{class:!0,style:!0,role:!0});var f=R(e);for(let p=0;p<t.length;p+=1)t[p].l(f);f.forEach(y),this.h()},h:function(){g(e,"class",r="toaster "+(n[1]||"")+" svelte-1phplh9"),g(e,"style",n[0]),g(e,"role","alert"),T(e,Eo,22,0,617)},m:function(d,f){M(d,e,f);for(let p=0;p<t.length;p+=1)t[p]&&t[p].m(e,null);i=!0,o||(a=[re(e,"mouseenter",n[4].startPause,!1,!1,!1,!1),re(e,"mouseleave",n[4].endPause,!1,!1,!1,!1)],o=!0)},p:function(d,[f]){f&20&&(c=fs(d[2]),ge(),ps(d,c,ut,u),t=zn(t,f,u,1,d,c,s,e,qn,Gt,null,ut),_e()),(!i||f&2&&r!==(r="toaster "+(d[1]||"")+" svelte-1phplh9"))&&g(e,"class",r),(!i||f&1)&&g(e,"style",d[0])},i:function(d){if(!i){for(let f=0;f<c.length;f+=1)L(t[f]);i=!0}},o:function(d){for(let f=0;f<t.length;f+=1)U(t[f]);i=!1},d:function(d){d&&y(e);for(let f=0;f<t.length;f+=1)t[f].d();o=!1,gt(a)}};return S("SvelteRegisterBlock",{block:l,id:Kt.name,type:"component",source:"",ctx:n}),l}function So(n,e,t){let s,{$$slots:r={},$$scope:i}=e;Te("Toaster",r,[]);let{reverseOrder:o=!1}=e,{position:a="top-center"}=e,{toastOptions:c=void 0}=e,{gutter:u=8}=e,{containerStyle:l=void 0}=e,{containerClassName:h=void 0}=e;const{toasts:d,handlers:f}=Ls(c);Mn(d,"toasts"),Fn(n,d,m=>t(9,s=m));let p;const _=["reverseOrder","position","toastOptions","gutter","containerStyle","containerClassName"];Object.keys(e).forEach(m=>{!~_.indexOf(m)&&m.slice(0,2)!=="$$"&&m!=="slot"&&console.warn(`<Toaster> was created with unknown prop '${m}'`)});const v=(m,b)=>f.updateHeight(m.id,b);return n.$$set=m=>{"reverseOrder"in m&&t(5,o=m.reverseOrder),"position"in m&&t(6,a=m.position),"toastOptions"in m&&t(7,c=m.toastOptions),"gutter"in m&&t(8,u=m.gutter),"containerStyle"in m&&t(0,l=m.containerStyle),"containerClassName"in m&&t(1,h=m.containerClassName)},n.$capture_state=()=>({useToaster:Ls,ToastWrapper:In,reverseOrder:o,position:a,toastOptions:c,gutter:u,containerStyle:l,containerClassName:h,toasts:d,handlers:f,_toasts:p,$toasts:s}),n.$inject_state=m=>{"reverseOrder"in m&&t(5,o=m.reverseOrder),"position"in m&&t(6,a=m.position),"toastOptions"in m&&t(7,c=m.toastOptions),"gutter"in m&&t(8,u=m.gutter),"containerStyle"in m&&t(0,l=m.containerStyle),"containerClassName"in m&&t(1,h=m.containerClassName),"_toasts"in m&&t(2,p=m._toasts)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{n.$$.dirty&864&&t(2,p=s.map(m=>({...m,position:m.position||a,offset:f.calculateOffset(m,s,{reverseOrder:o,gutter:u,defaultPosition:a})})))},[l,h,p,d,f,o,a,c,u,s,v]}class Dn extends be{constructor(e){super(e),ke(this,e,So,Kt,we,{reverseOrder:5,position:6,toastOptions:7,gutter:8,containerStyle:0,containerClassName:1}),S("SvelteRegisterComponent",{component:this,tagName:"Toaster",options:e,id:Kt.name})}get reverseOrder(){throw new Error("<Toaster>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set reverseOrder(e){throw new Error("<Toaster>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get position(){throw new Error("<Toaster>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set position(e){throw new Error("<Toaster>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get toastOptions(){throw new Error("<Toaster>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set toastOptions(e){throw new Error("<Toaster>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get gutter(){throw new Error("<Toaster>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set gutter(e){throw new Error("<Toaster>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get containerStyle(){throw new Error("<Toaster>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set containerStyle(e){throw new Error("<Toaster>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get containerClassName(){throw new Error("<Toaster>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set containerClassName(e){throw new Error("<Toaster>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const P="src/routes/ryanair/+page.svelte";function Ln(n){let e,t,s,r,i,o,a,c,u,l,h,d,f,p,_,v,m,b,k,C,x,te,z;const ve={c:function(){e=O("div"),t=O("input"),s=G(),r=O("button"),i=fe("svg"),o=fe("path"),a=fe("path"),c=Oe("Sign In With Email"),u=G(),l=O("button"),h=fe("svg"),d=fe("path"),f=Oe("Sign In With Apple"),p=G(),_=O("button"),v=fe("svg"),m=fe("path"),b=fe("path"),k=fe("path"),C=fe("path"),x=Oe("Sign In With Google"),this.h()},l:function(D){e=j(D,"DIV",{class:!0});var F=R(e);t=j(F,"INPUT",{class:!0,type:!0,placeholder:!0}),s=K(F),r=j(F,"BUTTON",{class:!0});var X=R(r);i=pe(X,"svg",{xmlns:!0,height:!0,viewBox:!0,width:!0,class:!0});var Z=R(i);o=pe(Z,"path",{d:!0,fill:!0}),R(o).forEach(y),a=pe(Z,"path",{fill:!0,d:!0}),R(a).forEach(y),Z.forEach(y),c=je(X,"Sign In With Email"),X.forEach(y),u=K(F),l=j(F,"BUTTON",{class:!0});var Ce=R(l);h=pe(Ce,"svg",{xmlns:!0,fill:!0,width:!0,height:!0,viewBox:!0,class:!0});var Ke=R(h);d=pe(Ke,"path",{d:!0}),R(d).forEach(y),Ke.forEach(y),f=je(Ce,"Sign In With Apple"),Ce.forEach(y),p=K(F),_=j(F,"BUTTON",{class:!0});var Be=R(_);v=pe(Be,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,preserveAspectRatio:!0,class:!0});var he=R(v);m=pe(he,"path",{d:!0,fill:!0}),R(m).forEach(y),b=pe(he,"path",{d:!0,fill:!0}),R(b).forEach(y),k=pe(he,"path",{d:!0,fill:!0}),R(k).forEach(y),C=pe(he,"path",{d:!0,fill:!0}),R(C).forEach(y),he.forEach(y),x=je(Be,"Sign In With Google"),Be.forEach(y),F.forEach(y),this.h()},h:function(){g(t,"class","email__input svelte-10dk9zl"),g(t,"type","email"),g(t,"placeholder","Your Email"),T(t,P,195,5,4592),g(o,"d","M0 0h24v24H0V0z"),g(o,"fill","none"),T(o,P,202,7,4918),g(a,"fill","white"),g(a,"d","M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V8l8 5 8-5v10zm-8-7L4 6h16l-8 5z"),T(a,P,203,7,4966),g(i,"xmlns","http://www.w3.org/2000/svg"),g(i,"height","24"),g(i,"viewBox","0 0 24 24"),g(i,"width","24"),g(i,"class","svelte-10dk9zl"),T(i,P,201,6,4827),r.disabled=n[3],g(r,"class","signin__with__email email__signin svelte-10dk9zl"),T(r,P,196,5,4685),g(d,"d","M380.844 297.529c.787 84.752 74.349 112.955 75.164 113.314-.622 1.988-11.754 40.191-38.756 79.652-23.343 34.117-47.568 68.107-85.731 68.811-37.499.691-49.557-22.236-92.429-22.236-42.859 0-56.256 21.533-91.753 22.928-36.837 1.395-64.889-36.891-88.424-70.883-48.093-69.53-84.846-196.475-35.496-282.165 24.516-42.554 68.328-69.501 115.882-70.192 36.173-.69 70.315 24.336 92.429 24.336 22.1 0 63.59-30.096 107.208-25.676 18.26.76 69.517 7.376 102.429 55.552-2.652 1.644-61.159 35.704-60.523 106.559M310.369 89.418C329.926 65.745 343.089 32.79 339.498 0 311.308 1.133 277.22 18.785 257 42.445c-18.121 20.952-33.991 54.487-29.709 86.628 31.421 2.431 63.52-15.967 83.078-39.655"),T(d,P,217,7,5440),g(h,"xmlns","http://www.w3.org/2000/svg"),g(h,"fill","#000000"),g(h,"width","24px"),g(h,"height","24px"),g(h,"viewBox","-52.01 0 560.035 560.035"),g(h,"class","svelte-10dk9zl"),T(h,P,210,6,5273),g(l,"class","signin__with__oauth apple__signin svelte-10dk9zl"),T(l,P,209,5,5189),g(m,"d","M255.878 133.451c0-10.734-.871-18.567-2.756-26.69H130.55v48.448h71.947c-1.45 12.04-9.283 30.172-26.69 42.356l-.244 1.622 38.755 30.023 2.685.268c24.659-22.774 38.875-56.282 38.875-96.027"),g(m,"fill","#4285F4"),T(m,P,230,7,6447),g(b,"d","M130.55 261.1c35.248 0 64.839-11.605 86.453-31.622l-41.196-31.913c-11.024 7.688-25.82 13.055-45.257 13.055-34.523 0-63.824-22.773-74.269-54.25l-1.531.13-40.298 31.187-.527 1.465C35.393 231.798 79.49 261.1 130.55 261.1"),g(b,"fill","#34A853"),T(b,P,234,7,6692),g(k,"d","M56.281 156.37c-2.756-8.123-4.351-16.827-4.351-25.82 0-8.994 1.595-17.697 4.206-25.82l-.073-1.73L15.26 71.312l-1.335.635C5.077 89.644 0 109.517 0 130.55s5.077 40.905 13.925 58.602l42.356-32.782"),g(k,"fill","#FBBC05"),T(k,P,238,7,6968),g(C,"d","M130.55 50.479c24.514 0 41.05 10.589 50.479 19.438l36.844-35.974C195.245 12.91 165.798 0 130.55 0 79.49 0 35.393 29.301 13.925 71.947l42.211 32.783c10.59-31.477 39.891-54.251 74.414-54.251"),g(C,"fill","#EB4335"),T(C,P,242,7,7220),g(v,"xmlns","http://www.w3.org/2000/svg"),g(v,"width","24px"),g(v,"height","24px"),g(v,"viewBox","-3 0 262 262"),g(v,"preserveAspectRatio","xMidYMid"),g(v,"class","svelte-10dk9zl"),T(v,P,223,6,6276),g(_,"class","signin__with__oauth google__signin svelte-10dk9zl"),T(_,P,222,5,6190),g(e,"class","signin__form svelte-10dk9zl"),T(e,P,194,4,4560)},m:function(D,F){M(D,e,F),w(e,t),qe(t,n[4]),w(e,s),w(e,r),w(r,i),w(i,o),w(i,a),w(r,c),w(e,u),w(e,l),w(l,h),w(h,d),w(l,f),w(e,p),w(e,_),w(_,v),w(v,m),w(v,b),w(v,k),w(v,C),w(_,x),te||(z=[re(t,"input",n[16]),re(r,"click",n[8],!1,!1,!1,!1),re(l,"click",n[10],!1,!1,!1,!1),re(_,"click",n[11],!1,!1,!1,!1)],te=!0)},p:function(D,F){F&16&&t.value!==D[4]&&qe(t,D[4]),F&8&&Dt(r,"disabled",D[3])},d:function(D){D&&y(e),te=!1,gt(z)}};return S("SvelteRegisterBlock",{block:ve,id:Ln.name,type:"else",source:"(169:3) {:else}",ctx:n}),ve}function Un(n){let e,t,s,r,i="Verify Code",o,a,c="Go Back",u,l;const h={c:function(){e=O("div"),t=O("input"),s=G(),r=O("button"),r.textContent=i,o=G(),a=O("p"),a.textContent=c,this.h()},l:function(f){e=j(f,"DIV",{class:!0});var p=R(e);t=j(p,"INPUT",{class:!0,type:!0,placeholder:!0,maxlength:!0}),s=K(p),r=j(p,"BUTTON",{class:!0,"data-svelte-h":!0}),Me(r)!=="svelte-1xqjkjo"&&(r.textContent=i),o=K(p),a=j(p,"P",{class:!0,"data-svelte-h":!0}),Me(a)!=="svelte-1vcytm"&&(a.textContent=c),p.forEach(y),this.h()},h:function(){g(t,"class","otp__input svelte-10dk9zl"),g(t,"type","text"),g(t,"placeholder","Verification Code sent to your email"),g(t,"maxlength","6"),T(t,P,174,5,4036),g(r,"class","otp__validate svelte-10dk9zl"),T(r,P,181,5,4199),g(a,"class","return__login svelte-10dk9zl"),T(a,P,184,5,4411),g(e,"class","otp__form svelte-10dk9zl"),T(e,P,173,4,4007)},m:function(f,p){M(f,e,p),w(e,t),qe(t,n[5]),w(e,s),w(e,r),w(e,o),w(e,a),u||(l=[re(t,"input",n[14]),re(r,"click",n[9],!1,!1,!1,!1),re(a,"click",n[15],!1,!1,!1,!1)],u=!0)},p:function(f,p){p&32&&t.value!==f[5]&&qe(t,f[5])},d:function(f){f&&y(e),u=!1,gt(l)}};return S("SvelteRegisterBlock",{block:h,id:Un.name,type:"if",source:"(148:25) ",ctx:n}),h}function Bn(n){var _,v;let e,t,s=((_=n[7])==null?void 0:_.user_metadata.full_name)+"",r,i,o,a=((v=n[7])==null?void 0:v.email)+"",c,u,l,h="Log out",d,f;const p={c:function(){e=O("div"),t=O("h3"),r=Oe(s),i=G(),o=O("p"),c=Oe(a),u=G(),l=O("button"),l.textContent=h,this.h()},l:function(b){e=j(b,"DIV",{class:!0});var k=R(e);t=j(k,"H3",{class:!0,style:!0});var C=R(t);r=je(C,s),C.forEach(y),i=K(k),o=j(k,"P",{class:!0});var x=R(o);c=je(x,a),x.forEach(y),u=K(k),l=j(k,"BUTTON",{class:!0,"data-svelte-h":!0}),Me(l)!=="svelte-9wslyf"&&(l.textContent=h),k.forEach(y),this.h()},h:function(){var b;g(t,"class","name svelte-10dk9zl"),B(t,"display",(b=n[7])!=null&&b.user_metadata.full_name?"block":"none"),T(t,P,166,5,3713),g(o,"class","email svelte-10dk9zl"),T(o,P,169,5,3858),g(l,"class","signout__button svelte-10dk9zl"),T(l,P,170,5,3898),g(e,"class","user__info svelte-10dk9zl"),T(e,P,165,4,3683)},m:function(b,k){M(b,e,k),w(e,t),w(t,r),w(e,i),w(e,o),w(o,c),w(e,u),w(e,l),d||(f=re(l,"click",n[12],!1,!1,!1,!1),d=!0)},p:function(b,k){var C,x,te;k&128&&s!==(s=((C=b[7])==null?void 0:C.user_metadata.full_name)+"")&&ft(r,s),k&128&&B(t,"display",(x=b[7])!=null&&x.user_metadata.full_name?"block":"none"),k&128&&a!==(a=((te=b[7])==null?void 0:te.email)+"")&&ft(c,a)},d:function(b){b&&y(e),d=!1,f()}};return S("SvelteRegisterBlock",{block:p,id:Bn.name,type:"if",source:"(140:26) ",ctx:n}),p}function xn(n){let e;const t={c:function(){e=O("div"),this.h()},l:function(r){e=j(r,"DIV",{class:!0}),R(e).forEach(y),this.h()},h:function(){g(e,"class","auth__loader svelte-10dk9zl"),T(e,P,163,4,3619)},m:function(r,i){M(r,e,i)},p:ue,d:function(r){r&&y(e)}};return S("SvelteRegisterBlock",{block:t,id:xn.name,type:"if",source:"(138:3) {#if loadingUser}",ctx:n}),t}function Xt(n){let e,t,s,r,i,o,a,c,u,l,h="Ryanair Import",d,f,p,_,v="Step 1: Sign In",m,b,k,C,x="Step 2: Paste your Verified Flights Email",te,z,ve,E,D,F,X,Z,Ce,Ke;i=new Dn({props:{position:"bottom-center",toastOptions:{duration:3e3}},$$inline:!0});function Be(ae,$){return ae[0]?xn:ae[7]!=null?Bn:ae[1]?Un:Ln}let he=Be(n),oe=he(n);const os={c:function(){e=O("link"),t=O("link"),s=O("link"),r=G(),H(i.$$.fragment),o=G(),a=O("main"),c=O("article"),u=O("header"),l=O("h1"),l.textContent=h,d=G(),f=O("div"),p=O("p"),_=O("strong"),_.textContent=v,m=G(),oe.c(),b=G(),k=O("p"),C=O("strong"),C.textContent=x,te=G(),z=O("textarea"),E=G(),D=O("button"),F=Oe("Submit Flights"),this.h()},l:function($){const Q=Hn("svelte-1tfyeiu",document.head);e=j(Q,"LINK",{rel:!0,href:!0}),t=j(Q,"LINK",{rel:!0,href:!0,crossorigin:!0}),s=j(Q,"LINK",{href:!0,rel:!0}),Q.forEach(y),r=K($),Y(i.$$.fragment,$),o=K($),a=j($,"MAIN",{});var as=R(a);c=j(as,"ARTICLE",{class:!0});var ot=R(c);u=j(ot,"HEADER",{class:!0});var cs=R(u);l=j(cs,"H1",{class:!0,"data-svelte-h":!0}),Me(l)!=="svelte-v6ax1l"&&(l.textContent=h),cs.forEach(y),d=K(ot),f=j(ot,"DIV",{class:!0});var de=R(f);p=j(de,"P",{});var ls=R(p);_=j(ls,"STRONG",{"data-svelte-h":!0}),Me(_)!=="svelte-1mxuz61"&&(_.textContent=v),ls.forEach(y),m=K(de),oe.l(de),b=K(de),k=j(de,"P",{});var us=R(k);C=j(us,"STRONG",{"data-svelte-h":!0}),Me(C)!=="svelte-1sr8jcf"&&(C.textContent=x),us.forEach(y),te=K(de),z=j(de,"TEXTAREA",{id:!0,style:!0,placeholder:!0}),R(z).forEach(y),E=K(de),D=j(de,"BUTTON",{class:!0});var hs=R(D);F=je(hs,"Submit Flights"),hs.forEach(y),de.forEach(y),ot.forEach(y),as.forEach(y),this.h()},h:function(){g(e,"rel","preconnect"),g(e,"href","https://fonts.googleapis.com"),T(e,P,146,1,3058),g(t,"rel","preconnect"),g(t,"href","https://fonts.gstatic.com"),g(t,"crossorigin","true"),T(t,P,147,1,3121),g(s,"href","https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap"),g(s,"rel","stylesheet"),T(s,P,148,1,3200),g(l,"class","page__title"),T(l,P,157,3,3464),g(u,"class","page__header"),T(u,P,156,2,3431),T(_,P,160,6,3556),T(p,P,160,3,3553),T(C,P,251,6,7534),T(k,P,251,3,7531),z.disabled=ve=n[7]==null,g(z,"id","flights_content"),B(z,"width","100%"),B(z,"height","300px"),g(z,"placeholder",`Example:
            
From: PilotApp@ryanair.com
Subject: Verified Flights for 05-Aug-24
Date: 6 August 2024 at 06:53:14 CEST
To: XXXXXX@ryrefb.com

2024/08/05

FlightNumber 	:	FR 7807
Registration 	:	EIEKT 
City Pair 	:	LTN - BCN
STD 	:	13:00
STA 	:	15:05
Block 	:	8228
Trip+Taxi 	:	5160
Reserves 	:	2278
Uplift 	:	7160
Dep 	:	8380
Arr 	:	3370
Burn Off 	:	5010
Burn Diff 	:	-150
Reason For Extra Fuel 	:	
Adult 	:	162
Child 	:	22
Infant 	:	1
Actual Pax 	:	184
Freight 	:	0
Placard Weight 	:	66990
Airborne 	:	13:33
Landed 	:	15:22
Total flight 	:	01:49
Off Block 	:	13:14
On Block 	:	15:26
Total Block 	:	02:12
Delay Time 1 	:	00:03
Delay Code 1 	:	93
Delay Time 2 	:	00:07
Delay Code 2 	:	36
Delay Time 3 	:	00:04
Delay Code 3 	:	89

Pilot Flying 	:
	Take Off 	:	XXXXXX
	Landing 	:	XXXXXX

Captain Remarks 	:	No Data Available`),T(z,P,252,3,7600),D.disabled=X=n[7]==null||n[2],g(D,"class","submit__flights svelte-10dk9zl"),T(D,P,305,3,8593),g(f,"class","page__content"),T(f,P,159,2,3522),g(c,"class","page"),T(c,P,155,1,3406),T(a,P,154,0,3398)},m:function($,Q){w(document.head,e),w(document.head,t),w(document.head,s),M($,r,Q),V(i,$,Q),M($,o,Q),M($,a,Q),w(a,c),w(c,u),w(u,l),w(c,d),w(c,f),w(f,p),w(p,_),w(f,m),oe.m(f,null),w(f,b),w(f,k),w(k,C),w(f,te),w(f,z),qe(z,n[6]),w(f,E),w(f,D),w(D,F),Z=!0,Ce||(Ke=[re(z,"input",n[17]),re(D,"click",n[13],!1,!1,!1,!1)],Ce=!0)},p:function($,[Q]){he===(he=Be($))&&oe?oe.p($,Q):(oe.d(1),oe=he($),oe&&(oe.c(),oe.m(f,b))),(!Z||Q&128&&ve!==(ve=$[7]==null))&&Dt(z,"disabled",ve),Q&64&&qe(z,$[6]),(!Z||Q&132&&X!==(X=$[7]==null||$[2]))&&Dt(D,"disabled",X)},i:function($){Z||(L(i.$$.fragment,$),Z=!0)},o:function($){U(i.$$.fragment,$),Z=!1},d:function($){$&&(y(r),y(o),y(a)),y(e),y(t),y(s),W(i,$),oe.d(),Ce=!1,gt(Ke)}};return S("SvelteRegisterBlock",{block:os,id:Xt.name,type:"component",source:"",ctx:n}),os}function Po(n,e,t){let{$$slots:s={},$$scope:r}=e;Te("Page",s,[]);let i=!0,o=!1,a=!1,c=!1,u="",l="",h="";window.addEventListener("message",async E=>{var X,Z;const D=(X=E.data)==null?void 0:X.access_token,F=(Z=E.data)==null?void 0:Z.refresh_token;D&&F&&await ye.auth.setSession({access_token:D,refresh_token:F})});const d=E=>{var D=/\S+@\S+\.\S+/;return D.test(E)},f=async()=>{if(!d(u)){q.error("A valid email is required.");return}t(3,c=!0);const{error:E}=await q.promise(ye.auth.signInWithOtp({email:u}),{loading:"Sending Email...",success:"Email sent successfully.",error:"Failed to send email."});E?t(1,o=!1):t(1,o=!0),t(3,c=!1)},p=async()=>{if(l&&l.length===6&&u){const{error:E}=await ye.auth.verifyOtp({email:u,token:l,type:"email"});E?q.error(E.message):t(1,o=!1)}else q.error("A valid code is required")},_=async()=>{const D=(await ye.auth.signInWithOAuth({provider:"apple",options:{redirectTo:`${window.location.origin}/login_callback`,skipBrowserRedirect:!0}})).data.url;D&&window.open(D,"_blank")},v=async()=>{const D=(await ye.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/login_callback`,skipBrowserRedirect:!0}})).data.url;D&&window.open(D,"_blank")},m=async()=>{await ye.auth.signOut()},b=async()=>{if(!h){q.error("The flights text area is empty.");return}t(6,h=Rs(h)),t(2,a=!0);const{error:E}=await q.promise(ye.functions.invoke("ryanair_verified_flights",{body:h}),{loading:"Processing Flights...",success:"Flights submitted successfully.",error:"Failed to import flights."});E||t(6,h=""),t(2,a=!1)};let k;dt(()=>{var D;const{data:E}=ye.auth.onAuthStateChange((F,X)=>{t(0,i=!1),t(7,k=X==null?void 0:X.user)});return(D=E.subscription)==null?void 0:D.unsubscribe});const C=[];Object.keys(e).forEach(E=>{!~C.indexOf(E)&&E.slice(0,2)!=="$$"&&E!=="slot"&&console.warn(`<Page> was created with unknown prop '${E}'`)});function x(){l=this.value,t(5,l)}const te=()=>{t(1,o=!1)};function z(){u=this.value,t(4,u)}function ve(){h=this.value,t(6,h)}return n.$capture_state=()=>({supabase:ye,removeUselessText:Rs,onMount:dt,toast:q,Toaster:Dn,loadingUser:i,awaitingOTP:o,disableSubmit:a,disableSignInWithEmail:c,email:u,otp:l,flights:h,validateEmail:d,signInWithEmail:f,verifyCode:p,signInWithApple:_,signInWithGoogle:v,signOut:m,submitFlights:b,user:k}),n.$inject_state=E=>{"loadingUser"in E&&t(0,i=E.loadingUser),"awaitingOTP"in E&&t(1,o=E.awaitingOTP),"disableSubmit"in E&&t(2,a=E.disableSubmit),"disableSignInWithEmail"in E&&t(3,c=E.disableSignInWithEmail),"email"in E&&t(4,u=E.email),"otp"in E&&t(5,l=E.otp),"flights"in E&&t(6,h=E.flights),"user"in E&&t(7,k=E.user)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[i,o,a,c,u,l,h,k,f,p,_,v,m,b,x,te,z,ve]}class Mo extends be{constructor(e){super(e),ke(this,e,Po,Xt,we,{}),S("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:Xt.name})}}export{Mo as P,Ro as g};
